-- D1 BOOSTER üöÄ v4
-- Full Stable Build

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local LP = Players.LocalPlayer

-- ===== STATES =====
local speedOn = false
local jumpOn = false
local gravityOn = false
local espOn = false
local freezeOn = false

local speedValue = 30
local jumpValue = 120
local normalJump = 50

local gravityValue = 40
local normalGravity = workspace.Gravity

local speedConn
local savedCFrame = nil

-- ===== CHAR FUNCS =====
local function getChar()
    return LP.Character or LP.CharacterAdded:Wait()
end

local function getHumanoid()
    return getChar():WaitForChild("Humanoid")
end

local function getHRP()
    return getChar():WaitForChild("HumanoidRootPart")
end

-- ===== GUI =====
local gui = Instance.new("ScreenGui")
gui.Name = "D1BoosterGUI"
pcall(function() gui.Parent = game.CoreGui end)

local main = Instance.new("Frame", gui)
main.Size = UDim2.new(0,380,0,560)
main.Position = UDim2.new(0.5,-190,0.5,-280)
main.BackgroundColor3 = Color3.fromRGB(10,10,10)
main.Active = true
main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0,18)

local stroke = Instance.new("UIStroke", main)
stroke.Color = Color3.fromRGB(255,255,255)
stroke.Thickness = 1
stroke.Transparency = 0.3

local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1,0,0,50)
title.BackgroundTransparency = 1
title.Text = "D1 BOOSTER üöÄ"
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.TextColor3 = Color3.fromRGB(255,255,255)

local container = Instance.new("Frame", main)
container.Size = UDim2.new(1,0,1,-60)
container.Position = UDim2.new(0,0,0,60)
container.BackgroundTransparency = 1

local layout = Instance.new("UIListLayout", container)
layout.Padding = UDim.new(0,10)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

local function makeButton(text)
    local b = Instance.new("TextButton")
    b.Size = UDim2.new(0.9,0,0,45)
    b.BackgroundColor3 = Color3.fromRGB(25,25,25)
    b.Text = text
    b.Font = Enum.Font.GothamBold
    b.TextSize = 15
    b.TextColor3 = Color3.fromRGB(255,255,255)
    Instance.new("UICorner", b).CornerRadius = UDim.new(0,10)
    b.Parent = container
    return b
end

local function makeLabel(text)
    local l = Instance.new("TextLabel")
    l.Size = UDim2.new(0.9,0,0,28)
    l.BackgroundTransparency = 1
    l.Text = text
    l.Font = Enum.Font.GothamBold
    l.TextSize = 14
    l.TextColor3 = Color3.fromRGB(255,255,255)
    l.TextXAlignment = Enum.TextXAlignment.Left
    l.Parent = container
    return l
end

-- ===== UI =====
local speedBtn = makeButton("‚ö° Speed: OFF")
local speedLabel = makeLabel("Speed Power: 30")

-- Slider
local sliderFrame = Instance.new("Frame", container)
sliderFrame.Size = UDim2.new(0.9,0,0,12)
sliderFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)
Instance.new("UICorner", sliderFrame).CornerRadius = UDim.new(1,0)

local sliderFill = Instance.new("Frame", sliderFrame)
sliderFill.Size = UDim2.new(0.3,0,1,0)
sliderFill.BackgroundColor3 = Color3.fromRGB(0,150,255)
Instance.new("UICorner", sliderFill).CornerRadius = UDim.new(1,0)

local jumpBtn = makeButton("ü¶ò Jump: OFF")
local gravityBtn = makeButton("üåç Gravity: OFF")
local freezeBtn = makeButton("üßä Freeze Anim: OFF")
local espBtn = makeButton("üëÅ ESP: OFF")
local setTpBtn = makeButton("üìç Set Teleport")
local tpBtn = makeButton("üöÄ Teleport")

-- ===== SLIDER LOGIC =====
local dragging = false
local minSpeed = 10
local maxSpeed = 60

sliderFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
    end
end)

UIS.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)

RunService.RenderStepped:Connect(function()
    if dragging then
        local mouse = UIS:GetMouseLocation()
        local pos = (mouse.X - sliderFrame.AbsolutePosition.X) / sliderFrame.AbsoluteSize.X
        pos = math.clamp(pos, 0, 1)
        sliderFill.Size = UDim2.new(pos,0,1,0)
        speedValue = math.floor(minSpeed + (maxSpeed - minSpeed) * pos)
        speedLabel.Text = "Speed Power: "..speedValue
    end
end)

-- ===== LOGIC =====

-- ‚ö° Speed (force movement)
speedBtn.MouseButton1Click:Connect(function()
    speedOn = not speedOn
    local hum = getHumanoid()
    local hrp = getHRP()

    if speedOn then
        speedBtn.Text = "‚ö° Speed: ON"
        speedBtn.BackgroundColor3 = Color3.fromRGB(0,150,0)

        if speedConn then speedConn:Disconnect() end
        speedConn = RunService.RenderStepped:Connect(function()
            if hum.MoveDirection.Magnitude > 0 then
                hrp.Velocity = Vector3.new(
                    hum.MoveDirection.X * speedValue * 1.2,
                    hrp.Velocity.Y,
                    hum.MoveDirection.Z * speedValue * 1.2
                )
            end
        end)
    else
        speedBtn.Text = "‚ö° Speed: OFF"
        speedBtn.BackgroundColor3 = Color3.fromRGB(25,25,25)
        if speedConn then speedConn:Disconnect() end
    end
end)

-- ü¶ò Jump
jumpBtn.MouseButton1Click:Connect(function()
    jumpOn = not jumpOn
    local hum = getHumanoid()
    if jumpOn then
        hum.JumpPower = jumpValue
        jumpBtn.Text = "ü¶ò Jump: ON"
        jumpBtn.BackgroundColor3 = Color3.fromRGB(0,150,0)
    else
        hum.JumpPower = normalJump
        jumpBtn.Text = "ü¶ò Jump: OFF"
        jumpBtn.BackgroundColor3 = Color3.fromRGB(25,25,25)
    end
end)

-- üåç Gravity
gravityBtn.MouseButton1Click:Connect(function()
    gravityOn = not gravityOn
    if gravityOn then
        workspace.Gravity = gravityValue
        gravityBtn.Text = "üåç Gravity: ON"
        gravityBtn.BackgroundColor3 = Color3.fromRGB(0,150,0)
    else
        workspace.Gravity = normalGravity
        gravityBtn.Text = "üåç Gravity: OFF"
        gravityBtn.BackgroundColor3 = Color3.fromRGB(25,25,25)
    end
end)

-- üßä Freeze (animation only)
freezeBtn.MouseButton1Click:Connect(function()
    freezeOn = not freezeOn
    local hum = getHumanoid()
    if freezeOn then
        freezeBtn.Text = "üßä Freeze Anim: ON"
        freezeBtn.BackgroundColor3 = Color3.fromRGB(0,150,0)
        for _,track in pairs(hum:GetPlayingAnimationTracks()) do
            track:AdjustSpeed(0)
        end
    else
        freezeBtn.Text = "üßä Freeze Anim: OFF"
        freezeBtn.BackgroundColor3 = Color3.fromRGB(25,25,25)
        for _,track in pairs(hum:GetPlayingAnimationTracks()) do
            track:AdjustSpeed(1)
        end
    end
end)

-- üìç Teleport system
setTpBtn.MouseButton1Click:Connect(function()
    local hrp = getHRP()
    savedCFrame = hrp.CFrame
    setTpBtn.Text = "üìç Teleport Set"
end)

tpBtn.MouseButton1Click:Connect(function()
    if savedCFrame then
        getHRP().CFrame = savedCFrame
    end
end)

-- üëÅ ESP
local espCache = {}

local function createESP(plr)
    if plr == LP then return end
    if espCache[plr] then return end

    local box = Instance.new("BoxHandleAdornment")
    box.Size = Vector3.new(4,6,4)
    box.Color3 = Color3.fromRGB(255,255,255)
    box.Transparency = 0.6
    box.AlwaysOnTop = true
    box.ZIndex = 5
    box.Parent = game.CoreGui
    espCache[plr] = box
end

RunService.RenderStepped:Connect(function()
    if not espOn then return end
    for _,plr in pairs(Players:GetPlayers()) do
        if plr ~= LP and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
            createESP(plr)
            espCache[plr].Adornee = plr.Character.HumanoidRootPart
        end
    end
end)

espBtn.MouseButton1Click:Connect(function()
    espOn = not espOn
    if espOn then
        espBtn.Text = "üëÅ ESP: ON"
        espBtn.BackgroundColor3 = Color3.fromRGB(0,150,0)
    else
        espBtn.Text = "üëÅ ESP: OFF"
        espBtn.BackgroundColor3 = Color3.fromRGB(25,25,25)
        for _,box in pairs(espCache) do box:Destroy() end
        espCache = {}
    end
end)

-- üîÅ Respawn Safe
LP.CharacterAdded:Connect(function()
    task.wait(1)
    local hum = getHumanoid()

    hum.JumpPower = jumpOn and jumpValue or normalJump
    workspace.Gravity = gravityOn and gravityValue or normalGravity

    if speedConn then
        speedConn:Disconnect()
        speedOn = false
        speedBtn.Text = "‚ö° Speed: OFF"
        speedBtn.BackgroundColor3 = Color3.fromRGB(25,25,25)
    end

    freezeOn = false
    freezeBtn.Text = "üßä Freeze Anim: OFF"
    freezeBtn.BackgroundColor3 = Color3.fromRGB(25,25,25)
end)
